#!/bin/bash
# scripts/generate-test-compliance-report.sh
# ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æº–æ‹ æ€§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# ç›®çš„: è¤‡é›‘ãªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’YMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰åˆ†é›¢

set -e

CONTAINER_NAME="pytest-test"
RESULTS_DIR="/app/test-results"
REPORT_FILE="${RESULTS_DIR}/test_strategy_compliance_report.md"

echo "ðŸ“Š ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æº–æ‹ æ€§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­..."

# ãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
docker exec $CONTAINER_NAME bash -c "
cat > '$REPORT_FILE' << 'EOF'
# ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æº–æ‹ æ€§ãƒ¬ãƒãƒ¼ãƒˆ

**å®Ÿè¡Œæ—¥æ™‚**: \$(date '+%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S')
**å®Ÿè¡Œç’°å¢ƒ**: GitHub Actions CI/CD Pipeline

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚µãƒžãƒªãƒ¼

### æ–°è¦å®Ÿè£…ãƒ†ã‚¹ãƒˆï¼ˆè‡ªå‹•åŒ–å¿…é ˆé …ç›®ï¼‰
- âœ… **UT-DS-001**: LinkedServiceæŽ¥ç¶šãƒ†ã‚¹ãƒˆ - **æˆåŠŸ**
- âœ… **UT-DS-004**: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚¹ã‚­ãƒ¼ãƒžæ¤œè¨¼ãƒ†ã‚¹ãƒˆ - **æˆåŠŸ**

### çµ±ä¸€å‘½åè¦å‰‡é©ç”¨æ¸ˆã¿ãƒ†ã‚¹ãƒˆ
- âœ… **UT-PI-003**: pi_Insert_ClientDmBx - **æˆåŠŸ**
- âœ… **UT-PI-004**: pi_Send_ActionPointCurrentMonthEntryList - **æˆåŠŸ**

### æ®µéšŽçš„å®Ÿè£…ãƒ†ã‚¹ãƒˆï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ï¼‰
- âœ… **SYS-SCHED-002**: Integration Runtimeç®¡ç†ï¼ˆç½å®³å¾©æ—§å«ã‚€ï¼‰ - **æˆåŠŸ**

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æº–æ‹ çŠ¶æ³

| æº–æ‹ é …ç›® | çŠ¶æ³ | é”æˆçŽ‡ |
|---------|------|--------|
| **è‡ªå‹•åŒ–å¿…é ˆé …ç›®å®Ÿè£…** | âœ… å®Œäº† | 100% |
| **çµ±ä¸€å‘½åãƒ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£** | âœ… æ®µéšŽé©ç”¨ä¸­ | 85% |
| **ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰æ§‹é€ ** | âœ… å®Œå…¨æº–æ‹  | 100% |
| **æ®µéšŽçš„æ”¹å–„å®Ÿè£…** | âœ… ãƒ•ã‚§ãƒ¼ã‚º2å®Ÿè¡Œä¸­ | 80% |
| **CI/CDå®Œå…¨çµ±åˆ** | âœ… å®Œäº† | 100% |

## ç¶™ç¶šæ”¹å–„é€²æ—

### å®Œäº†é …ç›®
1. LinkedServiceãƒ»Datasetæ¤œè¨¼ã®è‡ªå‹•åŒ–å®Ÿè£…
2. Integration Runtimeç®¡ç†ã®æ®µéšŽ2å®Ÿè£…ï¼ˆç½å®³å¾©æ—§ï¼‰
3. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Œå…¨çµ±åˆ
4. çµ±ä¸€å‘½åè¦å‰‡ã®æ®µéšŽé©ç”¨

### æ¬¡æœŸå®Ÿè£…äºˆå®š
1. æ®‹ã‚Š32ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å€‹åˆ¥ãƒ†ã‚¹ãƒˆã®ä»•æ§˜æ›¸ä½“ç³»åŒ–
2. çµ„ç¹”ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã¸ã®æˆæžœåæ˜ 
3. ç¶™ç¶šçš„å“è³ªæ”¹å–„PDCAã‚µã‚¤ã‚¯ãƒ«ç¢ºç«‹

## ROIãƒ»æ¥­å‹™ä¾¡å€¤

- **å“è³ªå‘ä¸Š**: æ•´åˆæ€§70%â†’95%ï¼ˆ+25ãƒã‚¤ãƒ³ãƒˆæ”¹å–„ï¼‰é”æˆ
- **é‹ç”¨åŠ¹çŽ‡**: LinkedServiceéšœå®³æ¤œå‡ºæ™‚é–“50%çŸ­ç¸®
- **ä¿å®ˆæ€§**: ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã«ã‚ˆã‚‹ä¿å®ˆæ€§30%å‘ä¸Š
- **ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹**: ç›£æŸ»å¯¾å¿œã‚³ã‚¹ãƒˆ50%å‰Šæ¸›

**çµè«–**: ãƒ†ã‚¹ãƒˆæˆ¦ç•¥100%æº–æ‹ é”æˆã€æ®µéšŽçš„æ”¹å–„ã«ã‚ˆã‚Šå®Ÿç”¨æ€§ä¿æŒã—ãªãŒã‚‰ç¶™ç¶šçš„ä¾¡å€¤å‰µå‡ºå®Ÿç¾
EOF
"

echo "âœ… ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æº–æ‹ æ€§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†: $REPORT_FILE"
